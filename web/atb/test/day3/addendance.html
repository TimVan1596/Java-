<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>考勤表</title>
    <!--layui引用-->
    <script src="/common/util/layui/layui.js"></script>
    <link rel="stylesheet" href="/common/util/layui/css/layui.css">
</head>
<body>
<div class="demoTable">
    学号：
    <div class="layui-inline">
        <input class="layui-input" name="id" id="demoReload" autocomplete="off">
    </div>
    姓名：
    <div class="layui-inline">
        <input class="layui-input" name="id" id="demoName" autocomplete="off">
    </div>
    <button class="layui-btn" data-type="reload">搜索</button>
</div>
<!--表格-->
<table class="layui-hide" id="test" lay-filter="test"></table>
<script>
    layui.use('table', function(){
        var table = layui.table;
        //展示已知数据
        table.render({
            elem: '#test'
            ,cellMinWidth: 80
            ,url:'/atb/attendance.do'
            ,toolbar: true
            ,page: true
            ,cols: [[ //标题栏
                {checkbox: true, fixed: true}
                ,{field:'no', title:'学号'}
                ,{field:'name', title:'姓名'}
                ,{field:'time', title:'入学时间'}
                ,{field:'state', title:'考勤情况'}
                ,{field:'note', title:'备注'}
                ,{field:'date', title:'考勤日期', sort: true}
            ]]
            ,even: true
            ,id: 'testReload'
        });

        //搜索
        var $ = layui.$, active = {
            reload: function(){
                var demoReload = $('#demoReload');
                var demoName = $('#demoName');
                //执行重载
                table.reload('testReload', {
                    page: {
                        curr: 1 //重新从第 1 页开始
                    }
                    ,where: {
                        no: {
                            //搜索学号参数no[no]
                            no: demoReload.val()
                        },
                        name: {
                            //搜索学号参数name[name]
                            name: demoName.val()
                        }
                    }
                });
            }
        };

        $('.demoTable .layui-btn').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });
</script>
</body>
</html>